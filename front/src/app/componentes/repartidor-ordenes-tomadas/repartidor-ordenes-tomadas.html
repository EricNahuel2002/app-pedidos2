<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h3 class="mb-0">Ordenes tomadas</h3>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Cliente</th>
              <th>Email</th>
              <th>Menú</th>
              <th>Dirección</th>
              <th>Precio</th>
              <th>Estado</th>
              <th class="text-center">Acciones</th>
            </tr>
          </thead>
          <tbody>
            @for (orden of ordenesListadas(); track orden.idOrden) {
              <tr>
              <td><strong>#{{ orden.idOrden }}</strong></td>
              <td>{{ orden.nombreCliente }}</td>
              <td><small>{{ orden.emailCliente }}</small></td>
              <td>{{ orden.nombreMenu }}</td>
              <td>{{ orden.direccion }}</td>
              <td>{{ orden.precioAPagar | currency }}</td>
              <td>
              <span 
                class="badge px-3 py-2"
                [ngClass]="{
                  'bg-warning text-dark': orden.estado === 'PENDIENTE',
                  'bg-primary': orden.estado === 'EN CURSO',
                  'bg-danger': orden.estado === 'CANCELADA',
                  'bg-success' : orden.estado === 'FINALIZADA'
                }"
              >
                {{ orden.estado }}
              </span>
              <td class="text-center">
                @if(orden.estado === 'EN CURSO'){
                    <button 
                  class="btn btn-primary btn-sm d-flex align-items-center gap-1 mx-auto"
                  (click)="finalizarOrden(orden.idOrden)"
                >
                  <i class="bi bi-check-circle"></i> Finalizar orden
                </button>
                }@else {
                    <button 
                  class="btn btn-danger btn-sm d-flex align-items-center gap-1 mx-auto"
                  (click)="verOrden(orden.idOrden)"
                >
                  <i class="bi bi-check-circle"></i> Ver orden
                </button>
                }
              </td>
            </tr>
            }
            @if(ordenesListadas().length === 0){
            <tr>
              <td colspan="7" class="text-center text-muted py-4">
                No hay órdenes disponibles en este momento.
              </td>
            </tr>
            }
            
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>